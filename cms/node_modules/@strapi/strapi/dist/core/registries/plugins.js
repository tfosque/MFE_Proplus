"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fp_1 = require("lodash/fp");
const pluginsRegistry = (strapi) => {
    const plugins = {};
    return {
        get(name) {
            return plugins[name];
        },
        getAll() {
            return plugins;
        },
        add(name, pluginConfig) {
            if ((0, fp_1.has)(name, plugins)) {
                throw new Error(`Plugin ${name} has already been registered.`);
            }
            const pluginModule = strapi.container.get('modules').add(`plugin::${name}`, pluginConfig);
            plugins[name] = pluginModule;
            return plugins[name];
        },
    };
};
exports.default = pluginsRegistry;
//# sourceMappingURL=plugins.js.map