"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fp_1 = require("lodash/fp");
/**
 * Test if the strapi application is considered as initialized (1st user has been created)
 */
async function isInitialized(strapi) {
    try {
        if ((0, fp_1.isEmpty)(strapi.admin)) {
            return true;
        }
        // test if there is at least one admin
        const anyAdministrator = await strapi.query('admin::user').findOne({ select: ['id'] });
        return !(0, fp_1.isNil)(anyAdministrator);
    }
    catch (err) {
        strapi.stopWithError(err);
    }
}
exports.default = isInitialized;
//# sourceMappingURL=is-initialized.js.map