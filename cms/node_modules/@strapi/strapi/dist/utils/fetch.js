"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.createStrapiFetch = void 0;
const node_fetch_1 = __importDefault(require("node-fetch"));
const https_proxy_agent_1 = require("https-proxy-agent");
function createStrapiFetch(strapi) {
    function fetch(url, options) {
        return (0, node_fetch_1.default)(url, {
            ...(fetch.agent ? { agent: fetch.agent } : {}),
            ...options,
        });
    }
    const { globalProxy: proxy } = strapi.config.get('server');
    if (proxy) {
        fetch.agent = new https_proxy_agent_1.HttpsProxyAgent(proxy);
    }
    return fetch;
}
exports.createStrapiFetch = createStrapiFetch;
//# sourceMappingURL=fetch.js.map